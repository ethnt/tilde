task:
  # Use the maximum timeout. Needed when rebuilding packages on a channel update.
  timeout_in: 120m

  macos_instance:
    image: ghcr.io/cirruslabs/macos-monterey-base:latest

  matrix:
    - name: build
      build_script:
        - sh <(curl -L https://nixos.org/nix/install)
        - /nix/var/nix/profiles/default/bin/nix develop -c "nix" "build" ".#darwinConfigurations.st-eturkeltaub2.system"
